<Macro VirtualHost $domain $subdomain $host $port>
    <VirtualHost *:80>
        ServerName $subdomain.$domain

        ProxyPass / http://$host:$port/ retry=0
        ProxyPassReverse / http://$host:$port/

        ErrorLog logs/$subdomain_error.log
        CustomLog logs/access.log netdata
        CustomLog logs/$subdomain_access.log netdata
    </VirtualHost>
</Macro>

#
# Virtual hosts
#
Use VirtualHost ${DOMAIN} netdata netdata 19999
Use VirtualHost ${DOMAIN} grafana grafana 3000
Use VirtualHost ${DOMAIN} plex plex 32400
Use VirtualHost ${DOMAIN} plexpy plexpy 8181
Use VirtualHost ${DOMAIN} movies radarr 7878
Use VirtualHost ${DOMAIN} tv sonarr 8989
Use VirtualHost ${DOMAIN} trackers jackett 9117
Use VirtualHost ${DOMAIN} transmission transmission 9091

#
# Server status virtual host
#
<VirtualHost *:80>
    ServerName apache

    <Location /server-status>
        SetHandler server-status
        Require all granted
    </Location>
</VirtualHost>
